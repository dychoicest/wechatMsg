# 微信留言板是一个利用微信公众号网页，将用户的留言写到区块链上的一个应用。
# 本应用使用到了火花链区块链接入平台，可以灵活的选择所要写到链。

# 项目使用
## 进入http://liuyan.sparkchain.cn/reload 页面进行配置。
## 新的appcode,appname会生成一组新的企业钱包，发行方会向该企业钱包充值一定代币，用户初次打开网站会给用户生成一个用户钱包并发给用户一定数量代笔作为手续费，用户提交留言成功后，企业钱包会向用户钱包充值一个红包。

## 进入火花小站-选择测试留言板-提交留言和填写手机号后，可以得到自己的钱包地址，私钥和余额
## 注：余额由于链上返回时效问题可能不会在转账时做到实时准确。

## 项目启动页
微信登录后进入liuyan.sparkchain.cn/init 获取用户code，再调用回调接口liuyan.sparkchain.cn，获取openId,根据openId创建用户钱包（已有钱包则直接跳到钱包页），创建钱包完毕后进入留言页

## 提交留言
提交留言接口liuyan.sparkchain.cn/message/send。用户钱包会向链上提交文本留言（留言需要GAS费），企业钱包会向该用户钱包发一个红包。这些操作完成后，跳到余额页

## IndexController类 主程序所有方法都在此类
## ReloadController类 配置页所有方法都在此类

## resources/templates
### message.ftl 留言板页面
### wallet.ftl 钱包页面
### reload.ftl 配置页面

---------------------------------------------------------------------------------------------
wechatMsg is a dapp which put user's message onto the blockchain that through the channel of wechat.
This dapp use sparkchain tools which can switch the bockchain freely to access the blockchain.

# Use
## Open http://liuyan.sparkchain.cn/reload to set the configerations。
## Create new app wallet by input the appcode,appname. System will generate a new blockchain account for the user who access the dapp for the first time, and the app wallet will send some crypto coins that depends whick blockchain you choose to the new account for gas in the meanwhile. Another payment that from the app wallet to the new account will happen after the user finished the message which have already written onto the blockchain.

## User can see the address and privatekey which belongs to the new account after he finish the message submit.
## PS：Because of the delay of writing data to the blockchian, it will be not able to view the blance immediately and correctly.

## Start page
after oauth by the wechat, access liuyan.sparkchain.cn/init to get the code which generated by the wechat platform，call the callback url liuyan.sparkchain.cn，to get the openId which identify the user, and we use it as the key to create the account. After all these actions dapp will show the message page to the user.

## Message
Call the url liuyan.sparkchain.cn/message/send to submit the message which the user write to the blockchain.（PS: it will costs gas fee），meanwile the app wallet will send a gift payment to the account。Then the browser will jump to the account infomation page. 

## IndexController类 主程序所有方法都在此类
## ReloadController类 配置页所有方法都在此类

## resources/templates
### message.ftl message page
### wallet.ftl account infomation page
### reload.ftl config page

